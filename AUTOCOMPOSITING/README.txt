
---------------- AUTO COMPOSITOR --------------------
----------- Moondog Animation Studio ----------------
--------- Created by: Aurelien Kochalski ------------
------------ Adapted by: Erin Terre -----------------
--------- Last Update: 06 - 17 - 2016 ---------------

This script automatically composites shots based on a projects CompositingTasks.xml.
It will be triggered by the Compositing AMI Script which creates the CompositingTasks.xml. 

As long as the project has an already built CompositingTasks.xml AND the project name has been updated in ConfigGeneral.xml 
the script can be run by itself by running the following command in the command prompt:
		"C:\Program Files\Adobe\Adobe After Effects CC 2015\Support Files\AfterFX.exe" -r W:\DEV\PIPELINE\AFXSCRIPTS\ANIMATICSPLITTER\Autocompositor.jsx

SETUP:  
	> In AfterFX
		>> Load Render Presets (Located in lib\RenderSettings.ars)
		>> Load Output Module (Located in lib\OutputModules.aom)
		>> Check the option in Edit > Preferences > General > Allow Scripts to write files and access Network
	> In Shotgun
		>> Set Client Name if there is one (Located in project info) 
			**THIS VARIABLE WILL MAKE THE SCRIPTS LOOK FOR THE PROJECT FOLDER INSIDE THE CLIENTS FOLDER ON THE SHARE DRIVE**
		>> Set Share Drive Path (Located in project info)
		>> Set Master Comp for each Sequence (located in sequence info)
		>> Set Cut Duration for each Shot (located in shot info)

TYPICAL USAGE: 
	> Mark Shots Comp task to 'Final - Ready to Render' or 'Preview - Ready to Render'
	> Click 'Run the Compositor' button (Located under 'More' in the Shots page)

USAGE W/O SHOTGUN:
	> Change project value in ConfigGeneral
	> Write CompositingTasks.xml for Project
	> Run command: "C:\Program Files\Adobe\Adobe After Effects CC 2015\Support Files\AfterFX.exe" -r W:\DEV\PIPELINE\AUTOCOMPOSITING\src\CompositingAutomatic_06_09_2016.jsx

Required Files: 
	> ConfigGeneral.xml - studio globals that lists all AFX module names, share drive name and project name
	> complog.log - logs the scripts process and any errors encountered. Look here if the script does not run correctly
	> FunctionsLibrary.jsxinc - functions that are used by the script
	> Autocompositor.jsx - the main script
	> CompositingTasks.xml - project specfic file created by the Compositing AMI Script
	> CompositingAMIScript.py - script triggered in shotgun to create CompositingTasks.xml, run Autocompositor.jsx and update shotgun

Requirements: 
	> After Effects CC 2015
	> Windows Operating System
	> Path to ConfigGeneral.xml set correctly in both scripts
		>> Autocompositor.jsx - LINE 19 - VARIABLE: pathToConfigXml
		>> CompositingAMIScript.py - LINE 61 - VARIABLE: config
	>> All project paths set correctly

Required Paths Generated by Script : (* This name change based on xml) 
	> Autocompositor.jsx 
		>> pathsToCompositingTasksXML - W:\*PROJECTNAME*\07_COMPOSITING\CompositingTasks.xml
		>> compPath - W:\*PROJECTNAME*\07_COMPOSITING
		>> prodPath - W:\*PROJECTNAME*\05_PROD
		>> pathToMasterCompositionProject - W:\*PROJECTNAME*\07_COMPOSITING\AFX_GENERAL\ID_Master_Comp.aep
		>> pathToRenders - W:\*PROJECTNAME*\05_PROD\EPISODES\*EPISODENAME*\04_RENDER\*SQNAME*_*SHNAME*
		>> pathToOutputCompositingFile - W:\*PROJECTNAME*\05_PROD\EPISODES\*EPISODENAME*\05_COMPOSITING\AFX\
		>> pathToOutputImageFile - W:\*PROJECTNAME*\05_PROD\EPISODES\*EPISODENAME*\05_COMPOSITNG\FINAL_IMAGES\
		>> pathToMOV - W:\*PROJECTNAME*\05_PROD\EPISODES\*EPISODENAME*\05_COMPOSITING\FINAL_IMAGES\*SQNAME*_*SHNAME*\v*VERSION*\
		>> pathToOutputRenderFolderFullResSequence - W:\*PROJECTNAME*\05_PROD\EPISODES\*EPISODENAME*\05_COMPOSITING\FINAL_IMAGES\*SQNAME*_*SHNAME*\v*VERSION*\PNG\
		>> pathToOutputPreviewSequence - W:\*PROJECTNAME*\05_PROD\EPISODES\*EPISODENAME*\05_COMPOSITING\FINAL_IMAGES\*SQNAME*_*SHNAME*\v*VERSION*\PNG_3frame\

	> FunctionsLibrary.jsx
		>> pathToCompositings - W:\*PROJECTNAME*\05_PROD\EPISODES\*EPISODENAME*\05_COMPOSITING\AFX

Required File Names Generated by Script : (* This name change based on xml)
	> Autocompositor.jsx
		>> fileName - *EPISODENAMESPLIT*_*SQNAME*_*SHNAME*
		>> outputCompositingFileName - *EPISODENAMESPLIT*_*SQNAME*_*SHNAME*_AFX_v*VERSION*_auto.aep
		>> outputRenderHalfResFileName - *EPISODENAMESPLIT*_*SQNAME*_*SHNAME*_preview_v*VERSION*.mov
		>> outputRenderHalfResSequenceFileName - *EPISODENAMESPLIT*_*SQNAME*_*SHNAME*_preview_v*VERSION*_[####].png
		>> outputRenderFullResSequenceFileName - *EPISODENAMESPLIT*_*SQNAME*_*SHNAME*_fullres_v*VERSION*_[####].png
		>> outputRenderFullResFileName - *EPISODENAMESPLIT*_*SQNAME*_*SHNAME*_fullres_v*VERSION*.mov

TROUBLESHOOTING:
	> Check the complog.log file for any errors in CompositingAMIScript.py
	> Run script without shotgun to see any errors in Autocompositor.jsx
	> Confirm Render Settings and Output Modules have been loaded
	> Confirm ConfigGeneral.xml and CompositingTasks.xml are in the correct locations
	> Confirm CompositingTasks.xml have tasks
	> Confirm Windows Registry has been set correctly
	> Confirm Shotgun Script Name, Server and Key is accurate in CompositingAMIScript.py

REPORTED BUGS: